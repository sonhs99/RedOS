use crate::graphic::PixelColor;

use super::Writable;

const MOUSE_CURSER: [[u8; 16]; 6] = [
    [
        0b1000_0000,
        0b1000_0000,
        0b1100_0000,
        0b1100_0000,
        0b1110_0000,
        0b1010_0000,
        0b1111_0000,
        0b1001_0000,
        0b1111_1000,
        0b1000_1000,
        0b1111_1100,
        0b1000_0100,
        0b1111_1110,
        0b1000_0010,
        0b1111_1111,
        0b1000_0001,
    ],
    [
        0b0000_0000,
        0b0000_0000,
        0b0000_0000,
        0b0000_0000,
        0b0000_0000,
        0b0000_0000,
        0b0000_0000,
        0b0000_0000,
        0b0000_0000,
        0b0000_0000,
        0b0000_0000,
        0b0000_0000,
        0b0000_0000,
        0b0000_0000,
        0b0000_0000,
        0b0000_0000,
    ],
    [
        0b1111_1111,
        0b1000_0000,
        0b1111_1111,
        0b1000_0000,
        0b1111_1111,
        0b1000_0000,
        0b1111_1111,
        0b1000_0000,
        0b1111_1111,
        0b1000_0000,
        0b1111_1111,
        0b1000_0000,
        0b1111_1111,
        0b1000_0000,
        0b1111_1111,
        0b1000_0000,
    ],
    [
        0b1000_0000,
        0b1000_0000,
        0b1100_0000,
        0b0100_0000,
        0b1110_0000,
        0b0010_0000,
        0b1111_0000,
        0b0001_0000,
        0b1111_1000,
        0b0000_1000,
        0b1111_1100,
        0b0000_0100,
        0b1111_1110,
        0b1111_1110,
        0b0000_0000,
        0b0000_0000,
    ],
    [
        0b1111_1111,
        0b1000_0011,
        0b1111_1101,
        0b1000_0101,
        0b1111_1000,
        0b1000_1000,
        0b1111_0000,
        0b1001_0000,
        0b1110_0000,
        0b1010_0000,
        0b1100_0000,
        0b1100_0000,
        0b1000_0000,
        0b1000_0000,
        0b0000_0000,
        0b0000_0000,
    ],
    [
        0b1100_0000,
        0b0100_0000,
        0b1100_0000,
        0b0100_0000,
        0b1110_0000,
        0b1010_0000,
        0b1110_0000,
        0b1010_0000,
        0b0111_0000,
        0b0101_0000,
        0b0111_0000,
        0b0101_0010,
        0b0011_1000,
        0b0010_1000,
        0b0011_1000,
        0b0011_1000,
    ],
];

pub fn print_curser(x: usize, y: usize, writer: &mut impl Writable) {
    for dy in 0..24 {
        for dx in 0..16 {
            let tile_high = dy / 8;
            let tile_low = dx / 8;
            let tile_idx = tile_high << 1 | tile_low;
            let offset_x = dx % 8;
            let offset_y = dy % 8;
            let high = MOUSE_CURSER[tile_idx][offset_y * 2] >> (7 - offset_x) & 0x01;
            let low = MOUSE_CURSER[tile_idx][offset_y * 2 + 1] >> (7 - offset_x) & 0x01;
            match high << 1 | low {
                0b10 => writer.write(x + dx, y + dy, PixelColor::White),
                0b11 => writer.write(x + dx, y + dy, PixelColor::Black),
                _ => {}
            }
        }
    }
}
